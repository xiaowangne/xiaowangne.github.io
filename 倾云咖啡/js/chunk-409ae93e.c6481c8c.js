(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-409ae93e"],{"25b3":function(t,a,e){},4773:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"menu-page"},[e("van-search",{attrs:{shape:"round","show-action":"",background:"",placeholder:"请输入搜索关键词"},on:{focus:function(a){return t.goPage("Search")}},scopedSlots:t._u([{key:"action",fn:function(){return[t.isShow?e("span",{staticClass:"user",on:{click:function(a){return t.goPage("My")}}},[e("img",{staticClass:"auto-img",attrs:{src:t.userImg,alt:""}})]):e("i",{staticClass:"fa fa-user fa-2x",attrs:{"aria-hidden":"true"},on:{click:function(a){return t.goPage("Login")}}})]},proxy:!0}])}),e("van-swipe",{staticClass:"my-swipe",staticStyle:{height:"163.03px"},attrs:{autoplay:3e3,"indicator-color":"#f4a018"}},t._l(t.bannerData,(function(t,a){return e("van-swipe-item",{key:a},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.bannerImg,expression:"item.bannerImg"}],staticClass:"auto-img",attrs:{alt:""}})])})),1),e("div",{staticClass:"menu-content"},[e("div",{staticClass:"aside-menu fl"},[e("van-sidebar",{model:{value:t.activeKey,callback:function(a){t.activeKey=a},expression:"activeKey"}},t._l(t.typeData,(function(a,s){return e("van-sidebar-item",{key:s,attrs:{title:a.typeDesc},on:{click:function(e){return t.getProductData(a,s)}}})})),1)],1),e("div",{staticClass:"content fl"},t._l(t.productData,(function(a,s){return e("van-card",{key:s,attrs:{title:a.name,price:a.price,desc:a.enname,thumb:a.smallImg,"lazy-load":!0},on:{click:function(e){return t.goDetail(a.pid)}}})})),1)])],1)},i=[],n=e("5530"),c=(e("25b3"),e("2f62")),o=Object(c["a"])("menuModule"),r=o.mapState,u=o.mapMutations,h={name:"Menu",data:function(){return{activeKey:-1,bannerData:[],typeData:[],productData:[],isShow:!1,userImg:null}},created:function(){this.getBannerData(),this.getTypeData();var t="isHot";0!=this.typeDataCache.length&&(t=this.typeDataCache[this.activeKeys].type),this.getProductData({type:t},this.activeKeys),this.getUserData()},computed:Object(n["a"])({},r(["bannerDataCache","typeDataCache","products","activeKeys"])),methods:Object(n["a"])(Object(n["a"])({},u(["changeData","changeProducts"])),{},{goPage:function(t){this.$router.push({name:t})},getBannerData:function(){var t=this;this.bannerDataCache.length>0?this.bannerData=this.bannerDataCache:(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/banner",params:{appkey:this.appkey}}).then((function(a){t.$toast.clear(),300==a.data.code&&(t.bannerData=a.data.result,t.changeData({key:"bannerDataCache",value:a.data.result}))})).catch((function(a){t.$toast.clear()})))},getTypeData:function(){var t=this;this.typeDataCache.length>0?this.typeData=this.typeDataCache:(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/type",params:{appkey:this.appkey}}).then((function(a){t.$toast.clear(),400==a.data.code&&(t.typeData=a.data.result,t.typeData.unshift({type:"isHot",typeDesc:"最新推荐"}),t.changeData({key:"typeDataCache",value:t.typeData}))})).catch((function(a){t.$toast.clear()})))},getProductData:function(t,a){var e=this;if(this.changeData({key:"activeKeys",value:a}),this.activeKey=this.activeKeys,this.products[t.type])this.productData=this.products[t.type];else{this.productData=[];var s={appkey:this.appkey,key:"type",value:t.type};"isHot"==t.type&&(s.key="isHot",s.value=1),this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/typeProducts",params:s}).then((function(a){e.$toast.clear(),500==a.data.code&&(e.productData=a.data.result,e.changeProducts({type:t.type,value:a.data.result}))})).catch((function(t){e.$toast.clear()}))}},goDetail:function(t){this.$router.push({name:"Detail",query:{pid:t}})},getUserData:function(){var t=this,a=localStorage.getItem("__Tk");a&&(this.isShow=!0),this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/findMy",params:{appkey:this.appkey,tokenString:a}}).then((function(a){t.$toast.clear(),"A001"===a.data.code&&(t.userImg=a.data.result[0].userImg)})).catch((function(a){t.$toast.clear()}))}})},l=h,p=e("2877"),d=Object(p["a"])(l,s,i,!1,null,"48844e57",null);a["default"]=d.exports}}]);
//# sourceMappingURL=chunk-409ae93e.c6481c8c.js.map